#!/usr/bin/env bash
###############################################################################%

_set_fg_="38;5;"
_set_bg_="48;5;"
_esc_="\033["
_restore_="0m"

_background() {
    case "${1:0:1}" in
        3) echo -en "${_esc_}${_set_bg_}236m";; 
        4) echo -en "";;
        9) echo -en "${_esc_}${_set_bg_}239m";;
        1) echo -en "";;
        *) return;;
    esac
}

show_colormap() {
	
	#echo -en "${_esc_}${_set_bg_}236m"
    for i in {30..37} {40..47} {90..97} {100..107}; do
    	if ((i < 100)); then
        	echo -en "$(_background "$i")${_esc_}${i}m  ${i}  ${_esc_}${_restore_} "
        else
#        	echo -en "${_esc_}${_set_fg_}0m${_esc_}${i}m  ${i} "
        	echo -en "$(_background "$i")${_esc_}${_set_fg_}0m${_esc_}${i}m  ${i} ${_esc_}${_restore_} "
        fi        
    	[[ $(($((i + 3)) % 10)) ==  0 ]] && echo
    done
    echo -en "${_esc_}${_restore_}"

	for i in {16..255}; do
		[[ $(( $(( i + 2 )) % 6 )) -eq 0 ]] && echo
	 	j=" $i"
	 	while [[ "${#j}" -lt 5 ]]; do
	 		j="$j "
	 	done
		echo -n ' '
		echo -en "${_esc_}${_set_bg_}${i}m${_esc_}${_set_fg_}232m${j}${_esc_}${_restore_}"
	done
	echo
}

main() {
    clear
	show_colormap
}

main "$@"
